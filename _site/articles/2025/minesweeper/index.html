<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title> | Minesweeper</title>
  <meta name="description" content="Personal website.
">

  <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon.ico">

  <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
  <link rel="canonical" href="http://localhost:4000/articles/2025/minesweeper/">

  <!-- CSS -->
  <link rel="stylesheet" href="http://localhost:4000/css/style.css">

   </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        <strong></strong> 
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="http://localhost:4000/">About</a>
	
	<!-- Ideas --> 
	<a class="page-link" href="http://localhost:4000/ideas/">Ideas</a>

        <!-- Articles -->
        <a class="page-link" href="http://localhost:4000/articles/">Articles</a>

	<!-- Projects --> 
	<a class="page-link" href="http://localhost:4000/projects/">Projects</a>

        <!-- Pages 
        
          
        
          
        
          
        
          
        
          
            <a class="page-link" href="http://localhost:4000/ideas/">Ideas</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <a class="page-link" href="http://localhost:4000/projects/">Projects</a>
          
        
          
        
          
        
          
        
	-->

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Minesweeper</h1>
    <p class="post-meta">April 15, 2025</p>
    <p class="post-meta"> Reading Time ~ 
  
  
    20 mins
  


</p>
  </header>

  <article class="post-content">
    <p class="text-justify">It is impossible to not embrace nostalgic days using a Pentium 4 PC. My first exposure to a computer game was minesweeper. Although the mysterious board full of squares and digits looks intimidating, the game is way more straighforward than it seems.</p>

<center>
<div class="img_row" style="height: 250px;width: 200px">
    <img class="col three" src="/assets/img/minesweeper.png" alt="" title="Childhood memories unblocked" />
</div>
</center>

<h2 id="game-description">Game Description</h2>
<p class="text-justify">The goal of the game is to clear the grid of squares without detonating any hidden mines. For that purpose, we click on a square to reveal it; if its a mine, the game is over, and if its a number, it represents how many mines are within the eight (or possibly less) surrounding squares. We should analytical use this information to flag (right click) and unconver squares that we have the certainty are safe. Once all non-mine squares are revealed the game is won.</p>

<p class="text-justify">Ok then, let’s play! But wait: where do we click first? In order to protect gamers’ mental health, classic minewsweeper makes sure the first click is always safe and it opens a flood-fill region of zeroes if possible. A simple way to implement this is by setting mine placement process right after the first click position is determined. Moreover, once the first click happens, a local empty region usually opens up. Evidently, the bigger the area cleared out, we can use purely logic to uncover most of the board, requiring fewer guesses and higher win chance.</p>

<p class="text-justify">Naturally, this led me to question <strong>how likely are we expected to win?</strong> That is, assuming perfect play, could we get an estimate of winning chances given random boards. Let us consider due to computational constraints, the smallest minesweeper size:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># Game parameters
</span><span class="n">GRID_SIZE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">MINES</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">SIMULATIONS</span> <span class="o">=</span> <span class="mi">100000</span> <span class="c1"># 100K
</span>
<span class="c1"># Directions to check neighbors
</span><span class="n">directions</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span>
              <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="p">]</span></code></pre></figure>

<p>As described above, we require as input the first move coordiantes, in order to randomly sample the location of the mines. Moreover, our experiments include <code class="language-plaintext highlighter-rouge">safe_zone_radius</code> as a parameter to flood-fill surrounding symmetric safe area around the first click.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">in_grid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">GRID_SIZE</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">GRID_SIZE</span>

<span class="k">def</span> <span class="nf">place_mines</span><span class="p">(</span><span class="n">first_move</span><span class="p">,</span> <span class="n">safe_zone_radius</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="s">"""
    Place mines randomly, but guarantee that the 3x3 region around first_move
    (for radius=1) has NO mines. This ensures the first click is zero and
    reveals a flood-fill region, like typical Minesweeper.
    """</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">GRID_SIZE</span><span class="p">,</span> <span class="n">GRID_SIZE</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">fx</span><span class="p">,</span> <span class="n">fy</span> <span class="o">=</span> <span class="n">first_move</span>

    <span class="c1"># Cells where we are not allowed to place mines (safe zone)
</span>    <span class="n">forbidden</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="n">fx</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">fy</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">safe_zone_radius</span><span class="p">,</span> <span class="n">safe_zone_radius</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">safe_zone_radius</span><span class="p">,</span> <span class="n">safe_zone_radius</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_grid</span><span class="p">(</span><span class="n">fx</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">fy</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">all_cells</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">)]</span>
    <span class="n">available</span> <span class="o">=</span> <span class="p">[</span><span class="n">cell</span> <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">all_cells</span> <span class="k">if</span> <span class="n">cell</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">forbidden</span><span class="p">]</span>

    <span class="n">mine_positions</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">available</span><span class="p">),</span> <span class="n">MINES</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pos</span> <span class="ow">in</span> <span class="n">mine_positions</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">available</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span>
        <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="c1"># Compute neighbor counts
</span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="ow">in</span> <span class="n">directions</span><span class="p">:</span>
                <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span>
                <span class="k">if</span> <span class="n">in_grid</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">and</span> <span class="n">grid</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>

    <span class="k">return</span> <span class="n">grid</span></code></pre></figure>

<p>Ultimately, we define the solver routine. Nothing fancy here. One function that uses a recursive flood-fill approach to reveal as much cells as possible, once a click has done and its not a mine; and our main solver which uses the game rules until the point where we need to make another random click to guess next safe location.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">reveal</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">revealed</span><span class="p">,</span> <span class="n">flagged</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="s">"""
    Reveal cell (x, y). Flood-fill if it's a 0.
    We assume the caller has already checked that (x, y) is not a mine
    when this matters (e.g., guesses). We *don't* reveal flagged cells.
    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">in_grid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">revealed</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="ow">or</span> <span class="n">flagged</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]:</span>
        <span class="k">return</span>

    <span class="n">revealed</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="ow">in</span> <span class="n">directions</span><span class="p">:</span>
            <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span>
            <span class="k">if</span> <span class="n">in_grid</span><span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">revealed</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">flagged</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]:</span>
                <span class="n">reveal</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">revealed</span><span class="p">,</span> <span class="n">flagged</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">simulate_game</span><span class="p">():</span>
    <span class="n">revealed</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">GRID_SIZE</span><span class="p">,</span> <span class="n">GRID_SIZE</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="n">flagged</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">GRID_SIZE</span><span class="p">,</span> <span class="n">GRID_SIZE</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>

    <span class="c1"># Choose a random first move
</span>    <span class="n">first_move</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">))</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">place_mines</span><span class="p">(</span><span class="n">first_move</span><span class="o">=</span><span class="n">first_move</span><span class="p">,</span> <span class="n">safe_zone_radius</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># With a safe zone, the first move should never be a mine
</span>    <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">first_move</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="c1"># Shouldn't happen, but let's be defensive.
</span>        <span class="k">return</span> <span class="bp">False</span>

    <span class="c1"># Reveal the first move (should be 0, so this opens a region)
</span>    <span class="n">reveal</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">revealed</span><span class="p">,</span> <span class="n">flagged</span><span class="p">,</span> <span class="o">*</span><span class="n">first_move</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">progress</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># Apply local logical rules repeatedly:
</span>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">revealed</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="c1"># Skip 0s and (hypothetical) revealed mines
</span>                    <span class="k">continue</span>

                <span class="n">neighbors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="ow">in</span> <span class="n">directions</span>
                    <span class="k">if</span> <span class="n">in_grid</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">)</span>
                <span class="p">]</span>

                <span class="n">hidden</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">in</span> <span class="n">neighbors</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">revealed</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">flagged</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span>
                <span class="p">]</span>
                <span class="n">flagged_neighbors</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">in</span> <span class="n">neighbors</span>
                    <span class="k">if</span> <span class="n">flagged</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span>
                <span class="p">]</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">hidden</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">F</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">flagged_neighbors</span><span class="p">)</span>
                <span class="n">H</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hidden</span><span class="p">)</span>

                <span class="c1"># Rule 1: All remaining mines already flagged -&gt; hidden are safe
</span>                <span class="k">if</span> <span class="n">F</span> <span class="o">==</span> <span class="n">val</span> <span class="ow">and</span> <span class="n">H</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">in</span> <span class="n">hidden</span><span class="p">:</span>
                        <span class="c1"># We decide logically they're safe; if grid says otherwise, we lose.
</span>                        <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                            <span class="k">return</span> <span class="bp">False</span>
                        <span class="n">reveal</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">revealed</span><span class="p">,</span> <span class="n">flagged</span><span class="p">,</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span>
                        <span class="n">progress</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="c1"># Rule 2: All hidden neighbors must be mines -&gt; flag them
</span>                <span class="k">elif</span> <span class="n">H</span> <span class="o">==</span> <span class="n">val</span> <span class="o">-</span> <span class="n">F</span> <span class="ow">and</span> <span class="n">H</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">)</span> <span class="ow">in</span> <span class="n">hidden</span><span class="p">:</span>
                        <span class="n">flagged</span><span class="p">[</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="n">progress</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">progress</span><span class="p">:</span>
            <span class="c1"># No more logical moves. Check if we've already won.
</span>            <span class="c1"># Win condition: all non-mine cells revealed.
</span>            <span class="k">if</span> <span class="n">np</span><span class="p">.</span><span class="nb">all</span><span class="p">((</span><span class="n">grid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="n">revealed</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>

            <span class="c1"># Need to guess: pick a random hidden, unflagged cell.
</span>            <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_SIZE</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">revealed</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">flagged</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">candidates</span><span class="p">:</span>
                <span class="c1"># No candidates but not all safe cells revealed -&gt; something inconsistent.
</span>                <span class="k">return</span> <span class="bp">False</span>

            <span class="n">gx</span><span class="p">,</span> <span class="n">gy</span> <span class="o">=</span> <span class="n">candidates</span><span class="p">[</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">candidates</span><span class="p">))]</span>

            <span class="c1"># Guess outcome: if it's a mine, we lose; otherwise reveal it.
</span>            <span class="k">if</span> <span class="n">grid</span><span class="p">[</span><span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="n">reveal</span><span class="p">(</span><span class="n">grid</span><span class="p">,</span> <span class="n">revealed</span><span class="p">,</span> <span class="n">flagged</span><span class="p">,</span> <span class="n">gx</span><span class="p">,</span> <span class="n">gy</span><span class="p">)</span></code></pre></figure>

<h1 id="simulation-results">Simulation Results</h1>

<p>After running the results with 100K instances (10 times) we obtain,</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Safe Zone Radius</th>
      <th style="text-align: center">Winning Prob</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td style="text-align: center">91.85 +/- 0.10</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td style="text-align: center">90.73 +/- 0.09</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td style="text-align: center">86.79 +/- 0.12</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td style="text-align: center">79.62 +/- 0.14</td>
    </tr>
  </tbody>
</table>

<p>When I first encountered these results, I couldn’t help but smile.</p>

<p>Consider <code class="language-plaintext highlighter-rouge">safe_zone_radius</code>=3, we would get a board like the one below, where at most 51 cells are available to randomly place 10 mines.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 <span class="c"># # # #</span>
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 1 2 <span class="c"># #</span>
<span class="nb">.</span> <span class="nb">.</span> F <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 2 <span class="c"># #</span>
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 2 <span class="c"># #</span>
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 3 <span class="c"># #</span>
1 1 1 1 1 1 1 <span class="c"># # #</span>
<span class="c"># # # # # # # # # #</span>
<span class="c"># # # # # # # # # #</span>
<span class="c"># # # # # # # # # #</span>
<span class="c"># # # # # # # # # #</span></code></pre></figure>

<p>with the corresponding revealed pattern,</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 <span class="k">*</span> 2 1 1
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 1 2 <span class="k">*</span> 1
<span class="nb">.</span> <span class="nb">.</span> F <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 2 2 2
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 2 <span class="k">*</span> 2
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 3 <span class="k">*</span> 2
1 1 1 1 1 1 1 <span class="k">*</span> 2 1
1 <span class="k">*</span> 1 2 <span class="k">*</span> 2 1 1 1 <span class="nb">.</span>
1 1 1 2 <span class="k">*</span> 2 <span class="nb">.</span> 1 1 1
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 1 1 <span class="nb">.</span> 1 <span class="k">*</span> 2
<span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> <span class="nb">.</span> 1 2 <span class="k">*</span></code></pre></figure>

<p class="text-justify">We could boldy assume that larger zero-flood region should help solve Mineswepper, thus increasing the win rate. However, a bigger safe zone, also forces all mines into smaller, denser and more awkwardly-placed mine regions, which might lead to ambiguity cases where we need to simply guess. I just happen to love when experimental evidence constrasts initial intuition.</p>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://minesweeper-pro.com/introduction/">Introduction to Minesweeper</a></li>
  <li><a href="https://ic.unicamp.br/~santiago/assets/mc558/2024%20-%202%20-%20projects/minesweeper%20is%20np-complete.pdf">Minesweeper is NP Complete</a></li>
</ul>

  </article>

</div>

      </div>
    </div>

    <footer>

<div class="wrapper">
    &copy; Copyright 2025 .
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.
</div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="http://localhost:4000/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
<script src="http://localhost:4000/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXXXXXXX', 'auto');
ga('send', 'pageview');
</script>


  </body>

</html>
